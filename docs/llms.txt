# bracketeer

**Model and run tournament competitions in R.**

bracketeer has a pipe-first API: stage types are verbs, you chain them
to describe the structure, then drive it live with result entry.
Downstream stages materialize automatically when their source completes.

``` r
library(bracketeer)

teams <- paste("Team", LETTERS[1:16])

tournament(teams) |>
  swiss("open", rounds = 5) |>
  single_elim("playoffs", take = top_n(8))
```

``` R
Tournament [2 stages]
  open         in_progress  0/8 matches
  playoffs     blocked      0/0 matches
```

The definition reads like a rulebook. The runtime feels like a
scoreboard.

## Installation

``` r
# install.packages("pak")
pak::pak("bbtheo/bracketeer")
```

Or try it right now without installing anything — open the World Cup
2026 simulation notebook in Google Colab:

[![](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/bbtheo/bracketeer/blob/main/notebooks/world_cup_2026.ipynb)

## A complete tournament

Four teams. A group stage, then a final for the top two. Definition to
champion in one session.

``` r
teams <- c("Lions", "Bears", "Eagles", "Wolves")

trn <- tournament(teams) |>
  round_robin("groups") |>
  single_elim("grand_final", take = top_n(2))

trn
```

``` R
Tournament [2 stages]
  groups       in_progress  0/6 matches
  grand_final  blocked      0/0 matches
```

`groups` opens immediately. `grand_final` is blocked until two teams
qualify. Use
[`matches()`](https://bbtheo.github.io/bracketeer/reference/matches.md)
to get the schedule:

``` r
m <- matches(trn, "groups")

trn <- results(trn, "groups", data.frame(
  match  = m$match_id,
  score1 = c(2, 1, 3, 1, 2, 1),
  score2 = c(1, 2, 1, 0, 0, 0)
))

trn
```

``` R
Tournament [2 stages]
  groups       complete     6/6 matches
  grand_final  in_progress  0/1 matches
```

When the last group result lands, `grand_final` materializes
automatically. No explicit advance call needed.

``` r
standings(trn, "groups")
```

``` R
  stage_id rank participant wins draws losses points score_diff sos
1   groups    1       Bears    3     0      0      3          4   3
2   groups    2       Lions    2     0      1      2          1   4
3   groups    3      Eagles    1     0      2      1         -2   5
4   groups    4      Wolves    0     0      3      0         -3   6
  head_to_head
1            0
2            0
3            0
4            0
```

``` r
final_m <- matches(trn, "grand_final")

trn <- result(trn, "grand_final",
  match = final_m$match_id[[1]],
  score = c(3, 1)
)

winner(trn)
```

``` R
[1] "Lions"
```

## Define any structure

Stage types are the verbs. The `from =` argument defaults to the
previous stage, so linear chains need no wiring at all.

``` r
# Swiss → top 8 playoffs (common esports format)
tournament(teams) |>
  swiss("open", rounds = 3) |>
  single_elim("playoffs", take = top_n(2))
```

``` R
Tournament [2 stages]
  open         in_progress  0/2 matches
  playoffs     blocked      0/0 matches
```

When two stages read from the same source, name it explicitly with
`from =`:

``` r
# Championship track + consolation bracket from the same group stage
tournament(teams) |>
  round_robin("groups") |>
  single_elim("championship", from = "groups", take = top_n(2)) |>
  single_elim("consolation",  from = "groups", take = remaining())
```

``` R
Tournament [3 stages]
  groups       in_progress  0/6 matches
  championship blocked      0/0 matches
  consolation  blocked      0/0 matches
```

``` r
# World Cup: 8 groups of 4, top 2 from each group into the knockouts
teams_32 <- paste("Nation", sprintf("%02d", 1:32))

tournament(teams_32) |>
  round_robin("groups", groups = 8) |>
  single_elim("round_of_16", take = top_per_group(2))
```

``` R
Tournament [2 stages]
  groups       in_progress  0/48 matches
  round_of_16  blocked      0/0 matches
```

All routing selectors — `top_n`, `top_per_group`, `remaining`, `losers`,
`slice_range`, `filter_by`, and their `_per_group` variants — sit in
`take =` and evaluate against the source stage’s standings at transition
time.

## The spec path

Define a blueprint without participants, validate it, then reuse it
across different fields:

``` r
my_spec <- spec() |>
  round_robin("groups") |>
  single_elim("finals",      from = "groups", take = top_n(2)) |>
  single_elim("consolation", from = "groups", take = remaining())

validate(my_spec, n = 16)   # errors loudly if routing is infeasible
```

``` r
trn2 <- build(my_spec, teams)
trn2
```

``` R
Tournament [3 stages]
  groups       in_progress  0/6 matches
  finals       blocked      0/0 matches
  consolation  blocked      0/0 matches
```

## Entering results

``` r
# One at a time
trn2 <- result(trn2, "groups", match = 1, score = c(2, 1))

# Batch: a data frame with columns match, score1, score2
more <- matches(trn2, "groups")
trn2 <- results(trn2, "groups", data.frame(
  match  = more$match_id,
  score1 = rep(2L, nrow(more)),
  score2 = rep(0L, nrow(more))
))
```

`score = c(home, away)` — always a numeric vector. For best-of series,
pass per-game scores and bracketeer sums them:
`score = c(1, 0, 1, 0, 1)`.

## Inspecting state

``` r
stage_status(trn)
```

``` R
        stage   status complete total materialized
1      groups complete        6     6         TRUE
2 grand_final complete        1     1         TRUE
```

``` r
routing_log(trn)
```

``` R
  source_stage_id         transition_id rule_applied     selected
1          groups groups_to_grand_final   top_n(n=2) Bears, Lions
  selected_count pool_before pool_after           timestamp
1              2           4          2 2026-02-19 13:15:52
```

## Manual advance (opt-in)

Auto-advance is the default. Pass `auto_advance = FALSE` to control each
stage transition yourself:

``` r
trn_m <- tournament(teams, auto_advance = FALSE) |>
  round_robin("groups") |>
  single_elim("grand_final", take = top_n(2))

m <- matches(trn_m, "groups")
trn_m <- results(trn_m, "groups", data.frame(
  match  = m$match_id,
  score1 = c(2, 1, 3, 1, 2, 1),
  score2 = c(1, 2, 1, 0, 0, 0)
))

# Groups are complete but grand_final hasn't opened yet
stage_status(trn_m)
```

``` R
        stage   status complete total materialized
1      groups complete        6     6         TRUE
2 grand_final  blocked        0     0        FALSE
```

``` r
trn_m <- advance(trn_m, "groups")
stage_status(trn_m)
```

``` R
        stage      status complete total materialized
1      groups    complete        6     6         TRUE
2 grand_final in_progress        0     1         TRUE
```

## API reference

### Definition verbs

| Function | Purpose |
|----|----|
| `tournament(participants, auto_advance = TRUE)` | Create a live tournament |
| [`spec()`](https://bbtheo.github.io/bracketeer/reference/spec.md) | Create a reusable blueprint |
| `round_robin(id, ...)` | Add round-robin stage |
| `single_elim(id, ...)` | Add single-elimination stage |
| `double_elim(id, ...)` | Add double-elimination stage |
| `swiss(id, ...)` | Add Swiss-system stage |
| `two_leg(id, ...)` | Add two-leg knockout stage |
| `group_stage_knockout(id, ...)` | Add combined group+knockout stage |

Each verb accepts `from = previous_stage()` (default in linear chains)
and `take =` (routing selector; default: all participants from source).

### Routing selectors

| Selector | Picks |
|----|----|
| `top_n(n)` | Top n by overall standings |
| `bottom_n(n)` | Bottom n by overall standings |
| `slice_range(from, to)` | Positions from–to |
| `top_per_group(n)` | Top n from every group |
| `bottom_per_group(n)` | Bottom n from every group |
| `slice_per_group(from, to)` | Positions from–to within every group |
| [`remaining()`](https://bbtheo.github.io/bracketeer/reference/remaining.md) | Not yet consumed by a prior transition |
| [`losers()`](https://bbtheo.github.io/bracketeer/reference/losers.md) | Eliminated participants |
| `filter_by(fn)` | Custom predicate on the standings data frame |

### Runtime verbs

| Function | Purpose |
|----|----|
| `result(trn, stage, match, score)` | Enter one match result |
| `results(trn, stage, df)` | Batch result entry |
| `advance(trn, stage)` | Manually advance a completed stage |
| `teardown(trn, stage)` | Un-materialize a stage and all dependents |

### Inspection nouns

| Function                        | Purpose                                |
|---------------------------------|----------------------------------------|
| `matches(trn, stage?, status?)` | Match table (pending / complete / all) |
| `standings(trn, stage?)`        | Standings table                        |
| `stage_status(trn)`             | Per-stage overview                     |
| `winner(trn)`                   | Tournament winner                      |
| `rankings(trn)`                 | Final placement table                  |
| `routing_log(trn)`              | Transition audit trail                 |

### Spec-only

| Function                    | Purpose                                 |
|-----------------------------|-----------------------------------------|
| `validate(spec, n)`         | Preflight feasibility check             |
| `build(spec, participants)` | Materialize spec into a live tournament |

## Documentation

- [`vignette("tournament-lifecycle")`](https://bbtheo.github.io/bracketeer/articles/tournament-lifecycle.md)
  — Full API lifecycle walkthrough
- [`vignette("fifa-world-cup")`](https://bbtheo.github.io/bracketeer/articles/fifa-world-cup.md)
  — Group stage routing with
  [`top_per_group()`](https://bbtheo.github.io/bracketeer/reference/top_per_group.md)
- [`vignette("swiss-top-cut")`](https://bbtheo.github.io/bracketeer/articles/swiss-top-cut.md)
  — Swiss to single-elimination linear chain
- [`vignette("nhl-stanley-cup")`](https://bbtheo.github.io/bracketeer/articles/nhl-stanley-cup.md)
  — Best-of-7 single-elimination playoffs
- [`vignette("error-catalog")`](https://bbtheo.github.io/bracketeer/articles/error-catalog.md)
  — Common errors and how to fix them

## License

MIT

# Package index

## All functions

- [`add_stage()`](https://bbtheo.github.io/bracketeer/reference/add_stage.md)
  : Add a stage to a tournament specification

- [`add_transition()`](https://bbtheo.github.io/bracketeer/reference/add_transition.md)
  : Add a transition between stages

- [`advance()`](https://bbtheo.github.io/bracketeer/reference/advance.md)
  : Advance tournament to next round

- [`bottom_n()`](https://bbtheo.github.io/bracketeer/reference/bottom_n.md)
  : Select bottom ranked participants from source standings

- [`bottom_per_group()`](https://bbtheo.github.io/bracketeer/reference/bottom_per_group.md)
  : Select bottom ranked participants per group

- [`build()`](https://bbtheo.github.io/bracketeer/reference/build.md) :
  Build a live tournament runtime from a specification

- [`build_tournament()`](https://bbtheo.github.io/bracketeer/reference/build_tournament.md)
  : Build a tournament runtime from a tournament specification

- [`compute_tournament_rankings()`](https://bbtheo.github.io/bracketeer/reference/compute_tournament_rankings.md)
  : Compute tournament rankings

- [`double_elim()`](https://bbtheo.github.io/bracketeer/reference/double_elim.md)
  : Create a double elimination bracket

- [`export_matches()`](https://bbtheo.github.io/bracketeer/reference/export_matches.md)
  : Export tournament matches across materialized stages

- [`export_standings()`](https://bbtheo.github.io/bracketeer/reference/export_standings.md)
  : Export tournament standings across materialized stages

- [`export_tournament_log()`](https://bbtheo.github.io/bracketeer/reference/export_tournament_log.md)
  : Export tournament routing log entries

- [`filter_by()`](https://bbtheo.github.io/bracketeer/reference/filter_by.md)
  : Select participants using a custom predicate function

- [`from_previous()`](https://bbtheo.github.io/bracketeer/reference/from_previous.md)
  : Resolve source stage from most recently defined stage order

- [`get_ready_stages()`](https://bbtheo.github.io/bracketeer/reference/get_ready_stages.md)
  : Get stage IDs currently ready to advance

- [`get_routing_log()`](https://bbtheo.github.io/bracketeer/reference/get_routing_log.md)
  : Get transition routing log entries

- [`group_stage_knockout()`](https://bbtheo.github.io/bracketeer/reference/group_stage_knockout.md)
  : Create a group stage followed by knockout bracket

- [`is_stage_complete()`](https://bbtheo.github.io/bracketeer/reference/is_stage_complete.md)
  : Check whether a stage is complete

- [`losers()`](https://bbtheo.github.io/bracketeer/reference/losers.md)
  : Select losers from a source stage by elimination round

- [`matches()`](https://bbtheo.github.io/bracketeer/reference/matches.md)
  : Inspect tournament matches

- [`new_selector()`](https://bbtheo.github.io/bracketeer/reference/new_selector.md)
  :

  Construct a selector object for transition `take =` routing

- [`previous_stage()`](https://bbtheo.github.io/bracketeer/reference/previous_stage.md)
  : Resolve source stage from the immediately preceding stage

- [`qualify_losers()`](https://bbtheo.github.io/bracketeer/reference/qualify_losers.md)
  : Select losers from a source stage by elimination round

- [`qualify_remaining()`](https://bbtheo.github.io/bracketeer/reference/qualify_remaining.md)
  : Select all entrants remaining in the transition source pool

- [`rankings()`](https://bbtheo.github.io/bracketeer/reference/rankings.md)
  : Get tournament rankings

- [`remaining()`](https://bbtheo.github.io/bracketeer/reference/remaining.md)
  : Select entrants remaining in the current transition source pool

- [`result()`](https://bbtheo.github.io/bracketeer/reference/result.md)
  : Fluent tournament result entry helper

- [`results()`](https://bbtheo.github.io/bracketeer/reference/results.md)
  : Fluent tournament batch result entry helper

- [`round_robin()`](https://bbtheo.github.io/bracketeer/reference/round_robin.md)
  : Create a round robin tournament

- [`routing_log()`](https://bbtheo.github.io/bracketeer/reference/routing_log.md)
  : Get transition routing log

- [`set_outcome()`](https://bbtheo.github.io/bracketeer/reference/set_outcome.md)
  : Configure tournament outcome depth

- [`single_elim()`](https://bbtheo.github.io/bracketeer/reference/single_elim.md)
  : Create a single elimination bracket

- [`single_elim_stage()`](https://bbtheo.github.io/bracketeer/reference/single_elim_stage.md)
  [`double_elim_stage()`](https://bbtheo.github.io/bracketeer/reference/single_elim_stage.md)
  [`round_robin_stage()`](https://bbtheo.github.io/bracketeer/reference/single_elim_stage.md)
  [`swiss_stage()`](https://bbtheo.github.io/bracketeer/reference/single_elim_stage.md)
  [`group_stage_knockout_stage()`](https://bbtheo.github.io/bracketeer/reference/single_elim_stage.md)
  [`two_leg_stage()`](https://bbtheo.github.io/bracketeer/reference/single_elim_stage.md)
  : Create a stage specification

- [`slice_per_group()`](https://bbtheo.github.io/bracketeer/reference/slice_per_group.md)
  : Select an inclusive standings slice per group

- [`slice_range()`](https://bbtheo.github.io/bracketeer/reference/slice_range.md)
  : Select an inclusive standings slice

- [`spec()`](https://bbtheo.github.io/bracketeer/reference/spec.md) :
  Create a bracketeer tournament specification

- [`split_stage()`](https://bbtheo.github.io/bracketeer/reference/split_stage.md)
  : Add multiple transitions from one source stage

- [`stage_status()`](https://bbtheo.github.io/bracketeer/reference/stage_status.md)
  : Inspect tournament stage status

- [`standings()`](https://bbtheo.github.io/bracketeer/reference/standings.md)
  : Inspect tournament standings

- [`swiss()`](https://bbtheo.github.io/bracketeer/reference/swiss.md) :
  Create a Swiss-system tournament

- [`teardown()`](https://bbtheo.github.io/bracketeer/reference/teardown.md)
  : Teardown tournament state

- [`top_n()`](https://bbtheo.github.io/bracketeer/reference/top_n.md) :
  Select top ranked participants from source standings

- [`top_per_group()`](https://bbtheo.github.io/bracketeer/reference/top_per_group.md)
  : Select top ranked participants per group

- [`tournament()`](https://bbtheo.github.io/bracketeer/reference/tournament.md)
  : Create an empty live tournament pipeline

- [`tournament_spec()`](https://bbtheo.github.io/bracketeer/reference/tournament_spec.md)
  : Create a tournament specification graph

- [`two_leg()`](https://bbtheo.github.io/bracketeer/reference/two_leg.md)
  : Create a two-leg stage or bracket

- [`validate()`](https://bbtheo.github.io/bracketeer/reference/validate.md)
  : Validate a tournament spec preflight

- [`validate_tournament()`](https://bbtheo.github.io/bracketeer/reference/validate_tournament.md)
  : Dry-run preflight validation for tournament flow feasibility

- [`validate_tournament_spec()`](https://bbtheo.github.io/bracketeer/reference/validate_tournament_spec.md)
  : Validate a tournament specification

- [`winner()`](https://bbtheo.github.io/bracketeer/reference/winner.md)
  : Get tournament winner

# Articles

### All vignettes

- [bracketeer Error
  Catalog](https://bbtheo.github.io/bracketeer/articles/error-catalog.md):
- [FIFA World Cup: Group Stage to
  Knockout](https://bbtheo.github.io/bracketeer/articles/fifa-world-cup.md):
- [NHL Stanley Cup Playoffs: Best-of-7
  Bracket](https://bbtheo.github.io/bracketeer/articles/nhl-stanley-cup.md):
- [LoL Worlds: Swiss Stage to Top-Cut
  Bracket](https://bbtheo.github.io/bracketeer/articles/swiss-top-cut.md):
- [Tournament Lifecycle and Live
  Operations](https://bbtheo.github.io/bracketeer/articles/tournament-lifecycle.md):
